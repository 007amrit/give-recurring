jQuery(document).ready((function(i){var s={progressInterval:null,hasError:!1,hasFinished:!1,pollingPeriod:1e3,updatePeriod:250,lastData:null,lastUpdate:null,init:function(){var s=i("body");s.on("sync_subscription_clicked",this.sync_subscription_details),s.on("subscription_details_synced",this.sync_subscription_transactions)},show_message:function(s,n){i(s).find(".modal-body").append(n)},sync_subscription_details:function(n){s.disable_buttons();var r={action:"give_recurring_sync_subscription_details",subscription_id:Give_Sync_Vars.id,"give-form-id":Give_Sync_Vars.form_id,security:Give_Recurring_Vars.sync_subscription_details_nonce},e=n.modal_id;return i(e).on("hidden.bs.modal",(function(){location.reload()})),s.show_message(e,"<h3>"+Give_Recurring_Vars.sync_subscription_details+"</h3>"),i.post(Give_Recurring_Vars.give_recurring_ajax_url,r,(function(n){if(s.show_message(e,n.html),n.error)return!1;var t=jQuery.Event("subscription_details_synced");t.log_id=n.log_id,t.subscription={},t.subscription.id=r.subscription_id,t.modal_id=e,i("body").trigger(t)})),!1},sync_subscription_transactions:function(n){var r={action:"give_recurring_sync_subscription_transactions",subscription_id:Give_Sync_Vars.id,"give-form-id":Give_Sync_Vars.form_id,log_id:n.log_id,security:Give_Recurring_Vars.sync_subscription_transactions_nonce};return s.show_message(n.modal_id,"<h3>"+Give_Recurring_Vars.sync_subscription_transactions+"</h3>"),i.post(Give_Recurring_Vars.give_recurring_ajax_url,r,(function(i){s.show_message(n.modal_id,i.html),s.enable_buttons()})),!1},enable_buttons:function(){i(".give-active-sync-message").fadeOut(),i("button.give-resync-button").prop("disabled",!1)},disable_buttons:function(){i(".give-active-sync-message").fadeIn(),i("button.give-resync-button").prop("disabled",!0)}};s.init()}));